{% extends "base.html" %}

{% block title %}Edit Machine - Machine Management System{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Edit Machine: {{ machine.hostname }}</h2>
    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
</div>

<div class="card shadow">
    <div class="card-body p-4">
        <form method="POST" action="{{ url_for('edit_machine', machine_id=machine.id) }}">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="hostname" class="form-label">Hostname*</label>
                    <input type="text" class="form-control" id="hostname" name="hostname" value="{{ machine.hostname }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="username" class="form-label">Username*</label>
                    <input type="text" class="form-control" id="username" name="username" value="{{ machine.username }}" required>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="os_type" class="form-label">OS Type*</label>
                    <select class="form-select" id="os_type" name="os_type" required>
                        <option value="Linux" {{ 'selected' if machine.os_type == 'Linux' }}>Linux</option>
                        <option value="Windows" {{ 'selected' if machine.os_type == 'Windows' }}>Windows</option>
                        <option value="Mac" {{ 'selected' if machine.os_type == 'Mac' }}>Mac</option>
                    </select>
                </div>
                <div class="col-md-8 mb-3">
                    <label for="installed_os" class="form-label">Installed OS*</label>
                    <input type="text" class="form-control" id="installed_os" name="installed_os" value="{{ machine.installed_os }}" required>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="private_ip" class="form-label">Private IP Address</label>
                    <input type="text" class="form-control" id="private_ip" name="private_ip" value="{{ machine.private_ip }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="public_ip" class="form-label">Public IP Address</label>
                    <input type="text" class="form-control" id="public_ip" name="public_ip" value="{{ machine.public_ip }}">
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="cloud_provider_url" class="form-label">Cloud Provider/URL</label>
                    <input type="text" class="form-control" id="cloud_provider_url" name="cloud_provider_url" value="{{ machine.cloud_provider_url }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="physical_location" class="form-label">Physical Location</label>
                    <input type="text" class="form-control" id="physical_location" name="physical_location" value="{{ machine.physical_location }}" placeholder="e.g., Server Room A, Rack 3">
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="vnc_port" class="form-label">VNC Port</label>
                    <input type="number" class="form-control" id="vnc_port" name="vnc_port" value="{{ machine.vnc_port }}">
                </div>
                <div class="col-md-3 mb-3">
                    <label for="ssh_port" class="form-label">SSH Port</label>
                    <input type="number" class="form-control" id="ssh_port" name="ssh_port" value="{{ machine.ssh_port }}">
                </div>
                <div class="col-md-3 mb-3">
                    <label for="outside_accessible" class="form-label">Outside Accessible</label>
                    <select class="form-select" id="outside_accessible" name="outside_accessible">
                        <option value="No" {{ 'selected' if not machine.outside_accessible }}>No</option>
                        <option value="Yes" {{ 'selected' if machine.outside_accessible }}>Yes</option>
                    </select>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="cpu_details" class="form-label">CPU Details*</label>
                    <input type="text" class="form-control" id="cpu_details" name="cpu_details" value="{{ machine.cpu_details }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="ram_details" class="form-label">RAM Details*</label>
                    <input type="text" class="form-control" id="ram_details" name="ram_details" value="{{ machine.ram_details }}" required>
                </div>
            </div>
            
            <div class="mb-3">
                <label for="remarks" class="form-label">Remarks</label>
                <textarea class="form-control" id="remarks" name="remarks" rows="3">{{ machine.remarks }}</textarea>
            </div>
            
            <div class="d-flex justify-content-end mt-4">
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-secondary me-2">Cancel</a>
                <button type="submit" class="btn btn-primary">Update Machine</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
